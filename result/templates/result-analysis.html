{% extends 'newbase.html' %}
{% load static %} {% load i18n %}

{% block content %}
<script src="{% static 'result/js/result-analysis.js' %}"></script>
<div class="container-fluid">
<div class="container my-3">
  <div class="row justify-content-end">
    <form class="position-relative " action="{% url 'set_language' %}" method="POST">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ redirect_to }}">
      <select class="form-control" name="language" id="language" onchange="this.form.submit()">
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as LANGUAGES %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
        <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected{% endif %}>
          {{ language.name_local }} ({{ language.code }})
        </option>
        {% endfor %}
      </select>
    </form>
  </div>
</div>
</div>
<div id="progress-bar-section" class="mx-5">
  <img class="col-5 mx-auto d-block" style="margin: 50px; max-width: 300px;"
  src={% static 'img/analyzing.gif' %} alt=" analyzing gif">
  <div class="progress" style="max-width: 500px; margin-left: auto; margin-right: auto;">
  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" id="progress-bar" style="background-color: var(--dark-purple)"></div>
</div>
</div>
<div class="d-flex flex-column justify-content-center align-items-center">
  <div id="login-form">
    <div class="text-center login-bg card" style="background-color: transparent; border-color: transparent;">

      <div class="card-body">
        <h5 class="text-center font-weight-bold mt-4 h3" style="color:var(--dark-purple)">
          {% trans "Result" %}</h5>
        <div class="container">
          <div class="row justify-content-center mt-5">
            <div class="col-9">
                <p class="h4 font-weight-bold" style="color:var(--medium-purple)">
                {% trans "User ID" %}:<br/>
                <h5 class="h3 font-weight-bolder">{{id}}</h5>
                </p>
            </div>
          </div>
          {% if result.covid_status|first in "H"  %}
          <h5 class="mt-2 h2" style="color: #DB4839">High Risk</h5>
          <!-- <svg style="display: block; margin: auto;" viewBox="0 0 70 70">
            <path
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"               
                transform="translate(16, 10)"
              fill="none"
              stroke="#DB4839";
              stroke-width="1";
              stroke-dasharray="{{ result.confidence_rate  }}, 100"
            />
            <text x="29" y="30" style="font-size:8px" class="percentage">{{ result.confidence_rate  }}%</text>
          </svg> -->
          {% elif result.covid_status|first in "L" %}
          <h5 class="mt-2 h2" style="color: #41AD48">Low Risk</h5>
          <!-- <svg viewBox="0 0 70 70">
            <path
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
                transform="translate(16, 10)"
              fill="none"
              stroke="#41AD48";
              stroke-width="1";
              stroke-dasharray="{{ result.confidence_rate  }}, 100"
            />
            <text x="29" y="30" style="font-size:7px" class="percentage">{{ result.confidence_rate  }}%</text>
          </svg> -->
          {% else %}
          <h5 class="mt-2 h2" style="color: black">Invalid</h5>
          <!-- <div style="display: block; margin: auto;">
            <svg class="mx-auto" viewBox="0 0 70 70">
              <path
                d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  transform="translate(16, 10)"
                fill="none"
                stroke="#000";
                stroke-width="1";
                stroke-dasharray="100, 100"
              />
              <text x="29" y="30" style="font-size:8px" class="percentage">X</text>
            </svg>
          </div> -->
          {% endif %}

          <div class="text-center mt-4">
            <a href="{% url 'common:thankyou_subject' %}">
            <button class="btn text-white login-button" type="button">
              <p style="font-size: 17px">{% trans "Next" %}</p>
            </button>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}