{% extends 'base.html' %}
{% load static %} {% load i18n %}

{% block content_container %}

<div class="container my-3">
  <div class="row justify-content-end">
    <form class="position-relative " action="{% url 'set_language' %}" method="POST">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ redirect_to }}">
      <select class="form-control" name="language" id="language" onchange="this.form.submit()">
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as LANGUAGES %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
        <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected{% endif %}>
          {{ language.name_local }} ({{ language.code }})
        </option>
        {% endfor %}
      </select>
    </form>
  </div>
</div>
<div class="d-flex flex-column justify-content-center align-items-center">

  <div id="login-form">
    <div class="login-bg card text-center" style="background-color: transparent; border-color: transparent; color:var(--dark-purple)">

      <div class="card-body">
        <h5 class="text-center font-weight-bold mt-4 h3" style="color:var(--dark-purple)">
          {% trans "Result" %}</h5>
        <div class="container">
          <div class="row justify-content-center mt-5">
            <div class="col-9">
                <p class="h4 font-weight-bold" style="color:var(--medium-purple)">
                {% trans "User ID" %}:<br/>
                <h5 class="h4 font-weight-bolder">{{id}}</h5>
                </p>
            </div>
          </div>
          {% for result in results %}
          <div class="card bg-light my-3 mx-2">
            <div class="card-header h6">{{result.date_created}}</div>
            <div class="card-body">
              {% if result.covid_status|first in "H"  %}
              <h5 class="card-title" style="color: #DB4839">High Risk</h5>
              <div class="mx-4">
                <svg style="margin-left: 40px" viewBox="0 0 30 30">
                  <path
                    d="M18 2.0845
                      a 15.9155 15.9155 0 0 1 0 31.831
                      a 15.9155 15.9155 0 0 1 0 -31.831"
                    transform="translate(3, 0)"
                    fill="none"
                    stroke="#DB4839";
                    stroke-width="1";
                    stroke-dasharray="{{ result.confidence_rate  }}, 100"
                  />
                  <text x="15" y="20" style="font-size:8px" class="percentage">{{ result.confidence_rate  }}%</text>
                </svg>
              </div>
              {% elif result.covid_status|first in "L" %}
              <h5 class="card-title" style="color: #41AD48">Low Risk</h5>
              <svg viewBox="0 0 40 40">
                <path
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  transform="translate(3, 0)"
                  fill="none"
                  stroke="#41AD48";
                  stroke-width="1";
                  stroke-dasharray="{{ result.confidence_rate  }}, 100"
                />
                <text x="15" y="20" style="font-size:8px" class="percentage">{{ result.confidence_rate  }}%</text>
              </svg>
              {% else %}
              <h5 class="card-title" style="color: black">Invalid</h5>
              <svg style="margin-left: 40px" viewBox="0 0 30 30">
                <path
                  d="M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831"
                  transform="translate(3, 0)"
                  fill="none"
                  stroke="#000";
                  stroke-width="1";
                  stroke-dasharray="100, 100"
                />
                <text x="15" y="20" style="font-size:8px" class="percentage">X</text>
              </svg>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}